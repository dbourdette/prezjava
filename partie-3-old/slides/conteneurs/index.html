<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1">
        <title>Les conteneurs jee</title>

        <link href="../../../common/css/css.css" rel="stylesheet" type="text/css">
        <link href="../../../common/css/prettify.css" rel="stylesheet" id="prettify-link">

        <link href="../../../common/css/default.css" class="theme" rel="stylesheet">
        <link href="../../../common/css/dev.css" class="theme" rel="stylesheet">

        <script src="../../../common/jquery/jquery-1.4.4.min.js"></script>
        <script src="../../../common/jquery/jquery-ui-1.8.7.custom.min.js"></script>

        <script src="../../../common/js/code.js"></script>
        <script src="../../../common/js/prettify.js" onload="prettyPrint();"></script>

  	</head>
  	<body>
    <div class="presentation">
      <div id="presentation-counter">Chargement...</div>
      <div style="display: block;" class="slides">
      
	      <div class="slide">
			<style>
			  #landing-slide p {
			    font-size: 35px;
			  }
			</style>
			<section id="landing-slide" class="middle">
			  <p>Les conteneurs jee</p>
			</section>
	      </div>
	
	      <div class="slide">
	      	<header>Les serveurs jee</header>
	        <section>
	        	<p>Un serveur jee est un serveur répondant aux spécifications jee.</p>
	        	<p>Ces spécifications définissent des services et des apis simplifiant le développement d'applications : on parle d'<b>environnements managés</b>.</p>
	        	<img alt="" src="img/jee-container.png" width="300px" style="margin:0 250px;"/>
	          	<p>D'un point de vue interne, les serveurs d'application sont des eco-systèmes riches :</p>
	          	<ul>
	          		<li>Conteneurs de composants : servlets, portlets et ejb</li>
	          		<li>Fournisseurs de services : JPA, JMS, JDBC, JNDI, JMX...</li>
	          		<li>Technologies de rendu : fichiers jsp, custom tags et expression language</li>
	          	</ul>
	          	<p>La liste complète des <a href="http://www.oracle.com/technetwork/java/javaee/tech/index.html" class="external" target="_blank">spécifications jee 6</a> est disponible sur le site d'oracle.</p>
	        </section>
	        <p class="source">http://fr.wikipedia.org/wiki/Java_EE</p>
	      </div>
	
	      <div class="slide">
	      	<header>Historique</header>
	        <section>
	        	<p>Voici les principales dates clées pour jee.</p>
	        	<ul>
	        		<li>J2EE 1.2 (1999) : servlets, jsp, EJBs (1.1), JMS, RMI
	        		<li>J2EE 1.3 (2001) : EJBs (2.0 CMP), JCA
	        		<li>J2EE 1.4 (2003) : EJBs (2.1 MDB), Web services, JAX-RPC, Deployment Specification
	        		<li>JEE 5 (2006) : EJB (3.0 annotations), JPA, Annotations, JSF, JAX-WS
	        		<li>JEE 6 (2009) : Profil web, EJB (3.1 singletons, lite, asynchronous), JAX-RS
	        	</ul>
	        	<p>La liste des technologies est beaucoup plus longue que ce résumé rapide.</p>
	        	<p>Plus généralement, l'évolution de jee peut être vu comme :</p>
	        	<ul>
	        		<li>Une base solide mais controversée (EJBs) en 2000
	        		<li>Une évolution d'un monolithe vers une galaxie de services (ex CMP -> JPA)
	        		<li>Le passage du tout xml vers les annotations depuis 2006
	        	</ul>
	        	<p>Aujourd'hui, jee a corrigé beaucoup de ses défauts et essaye d'allier entreprise et simplicité.</p>
	        </section>
	        <p class="source">http://en.wikipedia.org/wiki/Java_EE_version_history</p>
	      </div>
	
	      <div class="slide">
	      	<header>Environnements managés</header>
	        <section>
	        	<p>La philosophie des serveurs jee est de simplifier le développement.</p>
	        	<p>Les composants évoluent donc dans un <b>environnement managé</b> où les tâches ardues sont gérées par le conteneur.</p>
	        	<p>Au lieu d'écrire du code afin de réaliser une opération, on demande au conteneur de la prendre en charge.</p>
	        	<p style="margin-bottom: 0px;">Par exemple, le conteneur prend à sa charge une bonne partie de la relation aux bases de données :</p>
	        	<ul>
	        		<li><b>Configuration</b> de la connexion
	        		<li>Gestion d'un <b>pool de connexion</b> afin d'optimiser la consommation de ressources
	        		<li>Gestion des <b>transactions</b> (commit / rollback)
	        	</ul>
	        	<p>En théorie, il ne reste au composant qu'a s'interesser au code métier.</p>
	        </section>
	      </div>
	
	      <div class="slide">
	      	<header>Les conteneurs jee</header>
	        <section>
	        	<p>Il existe 2 types de conteneurs jee.</p>
	        	<img alt="" src="img/jee-containers.png" width="500px" style="margin:0 100px">
	        	<ul>
	        		<li>les <b>conteneur de servlets</b> : le minimum afin de faire des applications web
	        		<li>les <b>serveur d'application</b> : ils implémentent la totalité des spécifications
	        	</ul>
	        	<p>Il faut donc choisir en fonction des besoins de l'application.</p>
	        </section>
	      </div>
	
	      <div class="slide">
	      	<header>Quelques serveurs</header>
	        <section>
	        	<p>Voici quelques serveurs existants.</p>
	        	<p>Conteneurs de servlets</p>
	        	<ul>
	        		<li>tomcat
	        		<li>jetty
	        		<li>resin
	        	</ul>
	        	<p>Conteneurs d'applications</p>
	        	<ul>
	        		<li>glassfish
	        		<li>weblogic
	        		<li>websphere
	        		<li>jboss
	        	</ul>
	        </section>
	        <p class="source">http://www.servlets.com/engines/</p>
	      </div>
	
	      <div class="slide">
	      	<header>Les composants jee</header>
	        <section>
	        	<p>Voici quelques types de composants.</p>
	        	<table class="refTable">
	        		<thead>
	        			<tr>
	        				<td>nom</td>
	        				<td>description</td>
	        			</tr>
	        		</thead>
	        		<tr>
	        			<td>Servlets</td>
	        			<td>Le composant pour la gestion des requêtes http</td>
	        		</tr>
	        		<tr>
	        			<td width="250px">Enterprise jave beans (EJBs)</td>
	        			<td>Les composants métier : services, modèle de données et messages asynchrones</td>
	        		</tr>
	        		<tr>
	        			<td>Java server pages (JSPs)</td>
	        			<td>Le moteur de templating afin de créer les pages HTML</td>
	        		</tr>
	        		<tr>
	        			<td>Portlets</td>
	        			<td>Les composants gérants des fragments (widgets) de page web dans un moteur de portlets</td>
	        		</tr>
	        	</table>
	        	<p>Les composants sont des classes java qui adhèrent à une interface définissant un <b>cycle de vie</b>.<p>
	        	<pre>
public void init() {...}

public void doGet() {...}

public void destroy() {...}</pre>
	        	<p>Les spécifications récentes ont levé cette rigidité et les composants évoluent vers plus de flexibilité (annotations / injection de dépendances).</p>
	        </section>
	      </div>
	
	      <div class="slide">
	      	<style>
	      		#packagings tbody td {
	      			text-align:left;
	      		}
	      	</style>
	      	<header>Packaging</header>
	        <section>
	        	<p>Un <b>package</b> est un fichier zip contenant toutes les ressources d'un module : lib, appli web...</p>
	        	<p>Il existe 3 formes majoritaires de packaging en java.</p>
	        	<table class="refTable" id="packagings">
	        		<thead>
	        			<tr>
	        				<td>nom</td>
	        				<td>extension</td>
	        			</tr>
	        		</thead>
	        		<tbody>
		        		<tr>
		        			<td>Les librairies</td>
		        			<td>.jar</td>
		        		</tr>
		        		<tr>
		        			<td colspan="2">Modules réutilisables (avec possibilité de définir des ejbs dans le META-INT/ejb-jar.xml).</td>
		        		</tr>
		        		<tr>
		        			<td>Les applications web</td>
		        			<td>.war</td>
		        		</tr>
		        		<tr>
		        			<td colspan="2">servlets et jsp avec un descripteur de déploiement WEB-INF/web.xml.</td>
		        		</tr>
		        		<tr>
		        			<td>Les applications entreprise</td>
		        			<td>.ear</td>
		        		</tr>
		        		<tr>
		        			<td colspan="2">ejb avec un descripteur de déploiement META-INF/application.xml.</td>
		        		</tr>
		        	</tbody>
	        	</table>
	        	<p>Des descripteurs supplémentaires permettent de gérer certains aspects transverses, comme par exemple l'interaction avec la base données relationnelle via le <b>persistence.xml</b> (JPA)</p>
	          	<p>Les containers jee fournissent une solution flexible et complète mais complexe et difficile à appréhender au départ.</p>
	        </section>
	      </div>
	
	      <div class="slide">
	      	<header>Arborescence d'un war</header>
	        <section>
	        	<p>Un war (<b>web application archive</b>) est un zip contenant une application web.</p>
	        	<img alt="" src="../../../partie-2/tps/tomcat/img/war-layout.png" style="float:left;width:350px;margin:0 10px;">
	        	<p><br>Le répertoire <b>WEB-INF</b> est un répertoire protégé.<br>
	        	Ses fichiers ne sont pas accessibles directement.</p>
	        	<ul>
	        		<li>classes : les classes java du projet
	        		<li>lib : les librairies externes
	        		<li>jsp : les fichiers jsp
	        		<li>tags : des morceaux de jsp réutilisables
	        		<li>tld : des descripteur de tags
	        		<li>web.xml : le descripteur de déploiement
	        		<li>à la racine : les fichiers web accessibles
	        	</ul>
	        </section>
	      </div>
	
	      <div class="slide">
	      	<header>Architecture 3 tiers jee</header>
	        <section>
	        	<p>Le monde jee a longtemps été un parangon de l'architecture 3 tiers.</p>
	        	<img alt="" src="img/3-tiers-jee.png" width="600px" style="margin:0 100px;">
	        	<p>La répartition des rôles est franche :</p>
	        	<ul>
	        		<li>Les servlets recoivent les requêtes http
	        		<li>Les ejb implémentent les problématiques métier
	        		<li>La base assure la persistance des données
	        		<li>Les jsp formattent la réponse
	        	</ul>
	        	<p>C'est un modèle lourd à mettre en place qui à largement perdu en populatité.</p>
	        </section>
	      </div>
	     
	  </div>
      <!-- slides -->

    </div> <!-- presentation -->
    
  	</body>
</html>